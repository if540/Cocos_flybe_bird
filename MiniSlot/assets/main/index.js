System.register("chunks:///_virtual/game.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./push.ts","./slot.ts"],(function(t){"use strict";var n,e,r,i,o,s,a,l,u,c,p,h,f,y;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.defineProperty},function(t){s=t.cclegacy,a=t._decorator,l=t.Node,u=t.ParticleSystem2D,c=t.AudioSource,p=t.Input,h=t.Component},function(t){f=t.push},function(t){y=t.slot}],execute:function(){var g,d,m,_,A,R,b,v,M;s._RF.push({},"370d6D+0hVKxa3j/oUtpCiy","game",void 0);var O=a.ccclass,w=a.property;t("game",(g=O("game"),d=w([y]),m=w(l),_=w(u),g((b=n((R=function(t){function n(){for(var n,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return n=t.call.apply(t,[this].concat(s))||this,r(i(n),"slotArray",b,i(n)),r(i(n),"push",v,i(n)),r(i(n),"particleMoney",M,i(n)),o(i(n),"_isRolling",!1),o(i(n),"_asArr",null),n}e(n,t);var s=n.prototype;return s.onLoad=function(){this._asArr=this.getComponents(c)},s.start=function(){var t=this;this.push.on(p.EventType.TOUCH_START,(function(){t.startRolling()}))},s.startRolling=function(){var t=this;this._isRolling||(this._isRolling=!0,this._asArr[0].playing||this._asArr[0].play(),this.slotArray.forEach((function(t){t.rolling_infinite(0)})),this.scheduleOnce((function(){t.stopRolling()}),2))},s.getRandom=function(){return Math.floor(5*Math.random())},s.stopRolling=function(){var t=this;this.scheduleOnce((function(){t.slotArray[0]._awardNumber=t.getRandom()}),1),this.scheduleOnce((function(){t.slotArray[1]._awardNumber=t.getRandom()}),3),this.scheduleOnce((function(){t.slotArray[2]._awardNumber=t.getRandom(),t.scheduleOnce((function(){t._asArr[0].stop(),t.returnMoney()}),1)}),5)},s.returnMoney=function(){var t=this;this._asArr[2].playing||this._asArr[2].play(),this.particleMoney.resetSystem(),this.scheduleOnce((function(){var n=t.push.getComponent(f);t.particleMoney.stopSystem(),t.scheduleOnce((function(){n.onNormal(),t._isRolling=!1,console.log("return money end, _isRolling => true"),t._asArr[2].stop()}),2)}),3)},n}(h)).prototype,"slotArray",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=n(R.prototype,"push",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(R.prototype,"particleMoney",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=R))||A));s._RF.pop()}}}));

System.register("chunks:///_virtual/push.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,r,i,n,o,s,a,p,u,c,l,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.defineProperty},function(t){s=t.cclegacy,a=t._decorator,p=t.SpriteFrame,u=t.AudioSource,c=t.Sprite,l=t.Input,h=t.Component}],execute:function(){var f,m,y,F,_,d,v;s._RF.push({},"7b1a4ouEF9JxoWKRzN7el2M","push",void 0);var b=a.ccclass,g=a.property;t("push",(f=b("push"),m=g([p]),y=g(u),f((d=e((_=function(t){function e(){for(var e,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,i(n(e),"spFrame",d,n(e)),i(n(e),"as",v,n(e)),o(n(e),"_sp",null),e}r(e,t);var s=e.prototype;return s.onLoad=function(){this._sp=this.node.getComponent(c),this.onNormal()},s.start=function(){this.node.on(l.EventType.TOUCH_START,this.onTouchStart,this)},s.onNormal=function(){this._sp.spriteFrame=this.spFrame[0]},s.onActive=function(){this.as.playing||this.as.play(),this._sp.spriteFrame=this.spFrame[1]},s.onTouchStart=function(){this._sp.spriteFrame!=this.spFrame[1]&&this.onActive()},e}(h)).prototype,"spFrame",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=e(_.prototype,"as",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=_))||F));s._RF.pop()}}}));

System.register("chunks:///_virtual/slot.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,o,n,s,l,r,a,u,_,h,c;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,s=t.defineProperty},function(t){l=t.cclegacy,r=t._decorator,a=t.Vec3,u=t.Node,_=t.AudioSource,h=t.tween,c=t.Component}],execute:function(){var g,p,m,f,w,d,b;l._RF.push({},"d0e94d/4bRPUbZKIJKBGzFm","slot",void 0);var y=r.ccclass,C=r.property;new a(0,0,0),t("slot",(g=y("slot"),p=C(u),m=C(_),g((d=i((w=function(t){function i(){for(var i,e=arguments.length,l=new Array(e),r=0;r<e;r++)l[r]=arguments[r];return i=t.call.apply(t,[this].concat(l))||this,o(n(i),"content",d,n(i)),o(n(i),"rollingStopAs",b,n(i)),s(n(i),"_group",new u),s(n(i),"_speed",600),s(n(i),"_itemHeight",110),s(n(i),"_itemCount",5),s(n(i),"_maskHeight",155),s(n(i),"_topPos",i._itemHeight*i._itemCount/2+i._maskHeight/2),s(n(i),"_bottomPos",-1*i._topPos),s(n(i),"_offsetY",.5*i._itemHeight),s(n(i),"_startPosY",0+i._offsetY),s(n(i),"_nowValue",0),s(n(i),"_isRolling",!1),s(n(i),"_awardNumber",null),i}e(i,t);var l=i.prototype;return l.rolling_infinite=function(t){var i=this;if(null===this._awardNumber||this._awardNumber<0||this._awardNumber>this._itemCount)if(this._isRolling||t<0||t>this._itemCount)console.log("_isRolling",this._isRolling);else{this._isRolling=!0;var e=!1;t<this._nowValue&&(t+=this._itemCount,e=!0);var o=(t-this._nowValue)*this._itemHeight;this._nowValue=t;var n=o/this._speed;h(this.content).to(n,{position:new a(0,this.content.position.y+o,0)},{easing:"linear",onComplete:function(){i._nowValue=t>=i._itemCount?t-i._itemCount:t,e&&i.content.setPosition(new a(0,i.content.position.y-i._itemCount*i._itemHeight,0)),i._isRolling=!1;var o=i._nowValue+1>4?0:i._nowValue+1;i.rolling_infinite(o)}}).start()}else this.rolling_to(this._awardNumber)},l.setValue=function(t){if(!(t<0||t>this._itemCount)){var i=t*this._itemHeight+this._offsetY,e=this.content.position,o=e.x,n=e.z;this._nowValue=t,this.content.setPosition(new a(o,i,n))}},l.rolling_to=function(t){var i=this;if(this._isRolling||t<0||t>this._itemCount)console.log("_isRolling",this._isRolling);else{this._isRolling=!0;var e=!1;t<this._nowValue&&(t+=this._itemCount,e=!0);var o=(t-this._nowValue)*this._itemHeight;this._nowValue=t;this._speed;h(this.content).to(1,{position:new a(0,this.content.position.y+o,0)},{easing:"elasticOut",onUpdate:function(t,e){e<=.5&&e>=.4&&null!==i._awardNumber&&(i.rollingStopAs.playing||i.rollingStopAs.play())},onComplete:function(){i._nowValue=t>=i._itemCount?t-i._itemCount:t,e?(i.content.setPosition(new a(0,i.content.position.y-i._itemCount*i._itemHeight,0)),console.log("歸位"),i._isRolling=!1):(i._isRolling=!1,console.log("top  無需移位")),null!==i._awardNumber&&(i._awardNumber=null)}}).start()}},i}(c)).prototype,"content",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=i(w.prototype,"rollingStopAs",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=w))||f));l._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./push.ts","./slot.ts","./game.ts"],(function(){"use strict";return{setters:[null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});