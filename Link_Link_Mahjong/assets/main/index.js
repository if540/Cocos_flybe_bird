System.register("chunks:///_virtual/global.ts",["cc"],(function(c){"use strict";var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){var t,n;c({BonusScale:void 0,CardType:void 0}),e._RF.push({},"553cbUOpyZCDqf0hrGx3lC7","global",void 0),function(c){c[c.FA=1]="FA",c[c.JU=2]="JU",c[c.TI=3]="TI",c[c.TO=4]="TO",c[c.BA=5]="BA"}(t||(t=c("CardType",{}))),function(c){c[c.FA=25]="FA",c[c.JU=25]="JU",c[c.TI=1]="TI",c[c.TO=1]="TO",c[c.BA=1]="BA"}(n||(n=c("BonusScale",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/play.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./game_mgr.ts"],(function(e){"use strict";var r,t,n,i,a,o,p,l,u,c,s,f,h;return{setters:[function(e){r=e.cclegacy,t=e._decorator,n=e.Node,i=e.SpriteFrame,a=e.Graphics,o=e.Input,p=e.Component},function(e){l=e.applyDecoratedDescriptor,u=e.inheritsLoose,c=e.defineProperty,s=e.assertThisInitialized,f=e.initializerDefineProperty},function(e){h=e.GameMgr}],execute:function(){var y,g,m,b,d,_,v,I,z,F,G;r._RF.push({},"5f46fEZnoVAyqjnyTuQd0JK","play",void 0);var S=t.ccclass,T=t.property;e("play",(y=S("play"),g=T(n),m=T([i]),b=T(n),d=T(a),y((I=l((v=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r=e.call.apply(e,[this].concat(n))||this,c(s(r),"_gameIns",null),f(s(r),"panelGroup",I,s(r)),f(s(r),"cardTypeSpriteFrame",z,s(r)),f(s(r),"btnRefresh",F,s(r)),f(s(r),"graphics",G,s(r)),r}u(r,e);var t=r.prototype;return t.onLoad=function(){this._gameIns=h.GetInstance(),this._gameIns.initial(this.panelGroup.children,this.cardTypeSpriteFrame,this.graphics)},t.start=function(){var e=this;this.btnRefresh.on(o.EventType.MOUSE_DOWN,(function(){e._gameIns.refresh()}))},t.update=function(e){},r}(p)).prototype,"panelGroup",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=l(v.prototype,"cardTypeSpriteFrame",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=l(v.prototype,"btnRefresh",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=l(v.prototype,"graphics",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=v))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/card.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./game_mgr.ts"],(function(t){"use strict";var n,i,o,e,s,a,c,r,p,u,l,h,d,_;return{setters:[function(t){n=t.cclegacy,i=t._decorator,o=t.AudioSource,e=t.Animation,s=t.Input,a=t.Vec3,c=t.Sprite,r=t.tween,p=t.Component},function(t){u=t.inheritsLoose,l=t.defineProperty,h=t.assertThisInitialized,d=t.createClass},function(t){_=t.GameMgr}],execute:function(){var f;n._RF.push({},"826c1fJEQBJZrzPOZsFHEyc","card",void 0);var m=i.ccclass;i.property,t("card",m("card")(f=function(t){function n(){for(var n,i=arguments.length,o=new Array(i),e=0;e<i;e++)o[e]=arguments[e];return n=t.call.apply(t,[this].concat(o))||this,l(h(n),"_index",null),l(h(n),"_pos",null),l(h(n),"_cardType",null),l(h(n),"_audioPick",null),l(h(n),"_audioStop",null),l(h(n),"_spAnimation",null),n}u(n,t);var i=n.prototype;return i.onLoad=function(){var t=this.getComponents(o);this._audioPick=t[0],this._audioStop=t[1],this._spAnimation=this.getComponent(e)},i.initial=function(t,n){var i=this;this._index=t,this._pos=n,this.node.on(s.EventType.MOUSE_DOWN,(function(){_.GetInstance().pickOne(i)}))},i.reset=function(){this.node.setScale(a.ONE),this.node.getComponent(c).spriteFrame=null},i.picked=function(){this._audioPick.play(),this.playAnimation()},i.show=function(t){var n=this;r(this.node).to(0,{scale:a.ZERO}).delay(.05*t).to(1,{scale:a.ONE},{easing:"elasticOut",onComplete:function(){n.stopAnimation()}}).start()},i.bingo=function(t){var n=this;r(this.node).to(1,{scale:a.ZERO},{easing:"elasticInOut",onUpdate:function(n,i){i>=.5&&t.clearDraw()},onComplete:function(){n.stopAnimation()}}).start()},i.shake=function(){var t=new a,n=this.node.getPosition(),i=.03;this._audioStop.play(),r(this.node).to(i,{position:t.set(n.x+2,n.y,n.z)},{easing:"elasticOut"}).to(i,{position:t.set(n.x+-2,n.y,n.z)},{easing:"elasticOut"}).to(i,{position:n},{easing:"elasticOut"}).start()},i.playAnimation=function(){this._spAnimation.stop(),this._spAnimation.play("pick")},i.stopAnimation=function(){this._spAnimation.stop(),this._spAnimation.play("normal")},d(n,[{key:"pos",get:function(){return this._pos}},{key:"cardType",get:function(){return this._cardType},set:function(t){this._cardType=t}}]),n}(p))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/commButton.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var o,n,e,i,r,s,c,u,a,l;return{setters:[function(t){o=t.cclegacy,n=t._decorator,e=t.Input,i=t.AudioSource,r=t.tween,s=t.Vec3,c=t.Component},function(t){u=t.inheritsLoose,a=t.defineProperty,l=t.assertThisInitialized}],execute:function(){var p;o._RF.push({},"c7888zvhPRP7Yo73PQ3+4tJ","commButton",void 0);var h=n.ccclass;n.property,t("commButton",h("commButton")(p=function(t){function o(){for(var o,n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return o=t.call.apply(t,[this].concat(e))||this,a(l(o),"_audioPick",null),o}u(o,t);var n=o.prototype;return n.onLoad=function(){this.node.on(e.EventType.MOUSE_DOWN,this.onMouseDown,this);var t=this.getComponents(i);this._audioPick=t[0]},n.start=function(){},n.onMouseDown=function(){console.log("onMouseDown Inner trigger");var t=this.node.eulerAngles.clone();this._audioPick.play(),r(this.node).to(.3,{eulerAngles:new s(0,0,-360)},{easing:"cubicOut"}).to(0,{eulerAngles:t}).start()},o}(c))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/game_mgr.ts",["cc","./global.ts","./_rollupPluginModLoBabelHelpers.js","./card.ts"],(function(t){"use strict";var i,r,e,o,n,a,s,h,c,_,p;return{setters:[function(t){i=t.cclegacy,r=t._decorator,e=t.Vec2,o=t.Sprite,n=t.Color,a=t.Component},function(t){s=t.CardType},function(t){h=t.inheritsLoose,c=t.defineProperty,_=t.assertThisInitialized},function(t){p=t.card}],execute:function(){i._RF.push({},"c7b6bZTr2tKDYKHojUJ6Kpn","game_mgr",void 0);r.ccclass,r.property;var l=new e,u=t("GameMgr",function(t){function i(){for(var i,r=arguments.length,e=new Array(r),o=0;o<r;o++)e[o]=arguments[o];return i=t.call.apply(t,[this].concat(e))||this,c(_(i),"rowCount",4),c(_(i),"colCount",5),c(_(i),"pickCount",10),c(_(i),"_cards",[[],[],[],[],[]]),c(_(i),"_cardTypeSpriteFrame",[]),c(_(i),"_currentPick",[]),c(_(i),"_path_twice",[]),c(_(i),"_path_once",[]),c(_(i),"_path_horizon",[]),c(_(i),"_path_vertical",[]),c(_(i),"_drawing",null),c(_(i),"_drawing_offset_x",31),c(_(i),"_drawing_offset_y",36),c(_(i),"_gameData",[[],[],[],[],[]]),i}h(i,t),i.GetInstance=function(){return null==i.instance&&(i.instance=new i),i.instance};var r=i.prototype;return r.initial=function(t,i,r){for(var e=0;e<this.colCount;e++)for(var o=0;o<this.rowCount;o++)this._cards[e][o]=t[this.to1d(l.set(e,o))];this._cardTypeSpriteFrame=i,this._drawing=r,this.initialCards(),this.randomPlaceCards()},r.initialCards=function(){var t=this;this._cards.forEach((function(i,r){for(var e=0;e<i.length;e++)t._cards[r][e].getComponent(p).initial(t.to1d(l.set(r,e).clone()),l.set(r,e).clone()),t._cards[r][e].getComponent(o).spriteFrame=null,t._gameData[r][e]=0}))},r.offsetX=function(t){return this._drawing_offset_x+64*t+32+6},r.offsetY=function(t){return this._drawing_offset_y-84*t-84-22},r.drawLine=function(t,i,r){var e=this;this._drawing.clear(),this._drawing.lineWidth=6,this._drawing.strokeColor=n.BLACK;var o=[];"horizon"==t&&(o=[i].concat(this._path_horizon,[r])),"vertical"==t&&(o=[i].concat(this._path_vertical,[r])),"once"==t&&(o=[i].concat(this._path_once,[r])),console.log("drawArr",o),o.forEach((function(t,i){i%2==0?e._drawing.moveTo(e.offsetX(t.x),e.offsetY(t.y)):(e._drawing.lineTo(e.offsetX(t.x),e.offsetY(t.y)),e._drawing.stroke())}))},r.clearPick=function(){this._currentPick.forEach((function(t){t.stopAnimation()})),this._currentPick=[]},r.randomPlaceCards=function(){for(var t=this,i=function(i){var r=[];t._gameData.forEach((function(i,e){for(var o=0;o<i.length;o++)0==t._gameData[e][o]&&r.push(l.set(e,o).clone())}));var e=Math.floor(Math.random()*r.length),n=r[e];r.splice(e,1);var a=Math.floor(Math.random()*r.length),h=r[a],c=t.randomPickCardType();t._gameData[n.x][n.y]=c,t._gameData[h.x][h.y]=c;var _=t._cards[n.x][n.y],u=t._cards[h.x][h.y];_.getComponent(p).cardType=c,u.getComponent(p).cardType=c,_.getComponent(p).show(i),u.getComponent(p).show(i),_.getComponent(o).spriteFrame=t._cardTypeSpriteFrame[s[c]],u.getComponent(o).spriteFrame=t._cardTypeSpriteFrame[s[c]]},r=0;r<this.pickCount;r++)i(r)},r.randomPickCardType=function(){var t=Object.keys(s).length/2,i=Math.floor(Math.random()*t)+1;return s[""+i]},r.refresh=function(){var t=this;this.clearPick(),this._path_twice=[],this._cards.forEach((function(i,r){for(var e=0;e<i.length;e++){t._cards[r][e].getComponent(p).reset(),t._gameData[r][e]=0}})),this.randomPlaceCards()},r.pickOne=function(t){var i=null,r=this._currentPick.length;if(0==r)return this._currentPick.push(t),void t.picked();if(1==r){if(i=this._currentPick[0],t.pos==i.pos)return console.log("同位置",t.pos,i.pos),t.shake(),this._currentPick.pop(),void i.stopAnimation();if(t.cardType!==i.cardType)return console.log("牌色不同",t.cardType,i.cardType),t.shake(),void i.shake();this._currentPick.push(t),t.picked(),this.remove(i.pos,t.pos)?(console.log("連線"),i.bingo(this),t.bingo(this),this._gameData[i.pos.x][i.pos.y]=0,this._gameData[t.pos.x][t.pos.y]=0):(console.log("不連線"),i.shake(),t.shake()),this.clearPick()}},r.clearDraw=function(){this._drawing.clear()},r.to1d=function(t){return t.x+t.y*this.colCount},r.to2d=function(t){var i=t%this.colCount,r=Math.floor(t/this.colCount);return l.set(i,r)},r.isBlocked=function(t,i){return(t.x!=i.x||t.y!=i.y)&&0!=this._gameData[t.x][t.y]},r.horizon=function(t,i){if(t.y!=i.y)return!1;var r=[];if(this._path_horizon=[],t.x>i.x)for(var e=t.x-1;e>=i.x;e--){var o=l.set(e,t.y).clone();if(this.isBlocked(o,i))return!1;r.push(o)}else for(var n=t.x+1;n<=i.x;n++){var a=l.set(n,t.y).clone();if(this.isBlocked(a,i))return!1;r.push(a)}return this._path_horizon=r,!0},r.vertical=function(t,i){if(t.x!=i.x)return!1;var r=[];if(this._path_vertical=[],t.y>i.y)for(var e=t.y-1;e>=i.y;e--){var o=l.set(t.x,e).clone();if(this.isBlocked(o,i))return!1;r.push(o)}else for(var n=t.y+1;n<=i.y;n++){var a=l.set(t.x,n).clone();if(this.isBlocked(a,i))return!1;r.push(a)}return this._path_vertical=r,!0},r.turn_once=function(t,i){var r=new e(t.x,i.y),o=new e(i.x,t.y),n=!1,a=[];return this._path_once=[],this.isBlocked(r,t)||(n=this.vertical(t,r)&&this.horizon(r,i)),1==n?(a.push.apply(a,this._path_horizon.concat(this._path_vertical)),this._path_once=a,n):(this.isBlocked(o,t)||(n=this.vertical(i,o)&&this.horizon(o,t)),1==n&&a.push(o),a.push.apply(a,this._path_horizon.concat(this._path_vertical)),this._path_once=a,n)},r.turn_twice=function(t,i){this._path_twice=[],this.upPath(t),this.downPath(t),this.leftPath(t),this.rightPath(t);for(var r=0;r<this._path_twice.length;r++){var e=this._path_twice[r];if(this.turn_once(e,i)){var o,n;if(this.horizon(t,e))(n=this._path_twice).push.apply(n,this._path_horizon);else if(this.vertical(t,e)){var a;(a=this._path_twice).push.apply(a,this._path_vertical)}return(o=this._path_twice).push.apply(o,this._path_once),!0}}return!1},r.upPath=function(t){for(var i=t.y-1;i>=0;i--){var r=l.set(t.x,i).clone();if(this.isBlocked(r,t))break;this._path_twice.push(r)}},r.downPath=function(t){for(var i=t.y+1;i<=this.rowCount;i++){var r=l.set(t.x,i).clone();if(this.isBlocked(r,t))break;this._path_twice.push(r)}},r.leftPath=function(t){for(var i=t.x-1;i>=0;i--){var r=l.set(i,t.y).clone();if(this.isBlocked(r,t))break;this._path_twice.push(r)}},r.rightPath=function(t){for(var i=t.x+1;i<this.colCount;i++){var r=l.set(i,t.y).clone();if(this.isBlocked(r,t))break;this._path_twice.push(r)}},r.remove=function(t,i){return 1==this.horizon(t,i)?(console.log("horizon",this._path_horizon),this.drawLine("horizon",t,i),!0):1==this.vertical(t,i)?(console.log("vertical",this._path_vertical),this.drawLine("vertical",t,i),!0):1==this.turn_once(t,i)?(console.log("once",this._path_once),!0):1==this.turn_twice(t,i)&&(console.log("twice",this._path_twice),!0)},i}(a));c(u,"instance",null),i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./global.ts","./card.ts","./game_mgr.ts","./play.ts","./commButton.ts"],(function(){"use strict";return{setters:[null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});